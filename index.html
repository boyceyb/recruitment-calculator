<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recruitment Funnel Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            background: white;
            padding: 30px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 3px solid #4285f4;
        }
        
        .header-left h1 {
            font-size: 1.8rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 4px;
        }
        
        .header-left p {
            color: #6c757d;
            font-size: 0.95rem;
        }
        
        .header-right {
            background: #4285f4;
            color: white;
            padding: 12px;
            border-radius: 6px;
            font-size: 1.2rem;
        }
        
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .section {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .section-header {
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        .section-header h2 {
            font-size: 1rem;
            font-weight: 600;
            color: #333;
            margin-left: 8px;
        }
        
        .section-header .toggle {
            margin-left: auto;
            color: #6c757d;
        }
        
        .section-content {
            padding: 20px;
        }
        
        .input-group {
            margin-bottom: 16px;
        }
        
        .input-group label {
            display: block;
            font-size: 0.85rem;
            font-weight: 600;
            color: #495057;
            margin-bottom: 4px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .input-group input, .input-group select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 1rem;
            transition: border-color 0.2s;
        }
        
        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #4285f4;
            box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.2);
        }
        
        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        
        .four-col {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .result-box {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 12px;
            text-align: center;
        }
        
        .result-box h3 {
            font-size: 0.7rem;
            font-weight: 600;
            color: #6c757d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }
        
        .result-box .value {
            font-size: 1.4rem;
            font-weight: 700;
            color: #333;
        }
        
        .info-box {
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            border-radius: 4px;
            padding: 12px;
            margin-bottom: 16px;
        }
        
        .info-box h4 {
            font-size: 0.85rem;
            color: #1976d2;
            margin-bottom: 4px;
            font-weight: 600;
        }
        
        .info-box p {
            font-size: 0.8rem;
            color: #1565c0;
            margin: 2px 0;
        }
        
        .earnings-section {
            background: #4285f4;
            color: white;
            padding: 16px;
            border-radius: 4px;
            margin-bottom: 16px;
        }
        
        .earnings-section h3 {
            font-size: 0.9rem;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .earnings-section .total {
            background: #3367d6;
            padding: 12px;
            border-radius: 4px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .btn {
            width: 100%;
            background: #6c757d;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 4px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .btn:hover {
            background: #5a6268;
        }
        
        .btn-primary {
            background: #4285f4;
        }
        
        .btn-primary:hover {
            background: #3367d6;
        }
        
        .breakdown-section {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            display: none;
        }
        
        .breakdown-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            padding: 20px;
        }
        
        .period-card {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 16px;
        }
        
        .period-card h4 {
            font-size: 1rem;
            font-weight: 600;
            color: #333;
            text-align: center;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 2px solid #dee2e6;
        }
        
        .period-revenue {
            background: #4285f4;
            color: white;
            border-radius: 4px;
            padding: 10px;
            text-align: center;
            margin-bottom: 12px;
        }
        
        .period-revenue .label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }
        
        .period-revenue .amount {
            font-size: 1.2rem;
            font-weight: 700;
        }
        
        .period-metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }
        
        .metric-item {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 3px;
            padding: 8px;
            text-align: center;
        }
        
        .metric-item .value {
            font-size: 1rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 2px;
        }
        
        .metric-item .label {
            font-size: 0.65rem;
            color: #6c757d;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }
        
        .info-footer {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .info-footer h4 {
            font-size: 0.85rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }
        
        .info-footer p {
            font-size: 0.85rem;
            color: #6c757d;
        }
        
        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            
            .header {
                flex-direction: column;
                gap: 16px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-left">
                <h1>Recruitment Funnel Calculator</h1>
                <p>Calculate your recruitment metrics and track performance targets</p>
            </div>
            <div class="header-right">
                🎯
            </div>
        </div>
        
        <div class="main-grid">
            <div class="section">
                <div class="section-header">
                    <span>📊</span>
                    <h2>Performance Predictor</h2>
                    <span class="toggle">▼</span>
                </div>
                <div class="section-content">
                    <div class="four-col">
                        <div class="input-group">
                            <label for="cvs">CVs</label>
                            <input type="number" id="cvs" placeholder="0" min="0">
                        </div>
                        <div class="input-group">
                            <label for="interviews">Interviews</label>
                            <input type="number" id="interviews" placeholder="0" min="0">
                        </div>
                        <div class="input-group">
                            <label for="offers">Offers</label>
                            <input type="number" id="offers" placeholder="0" min="0">
                        </div>
                        <div class="input-group">
                            <label for="deals">Deals</label>
                            <input type="number" id="deals" placeholder="0" min="0">
                        </div>
                    </div>
                    
                    <div class="results-grid">
                        <div class="result-box">
                            <h3>CVs Expected</h3>
                            <div class="value" id="result-cvs">0</div>
                        </div>
                        <div class="result-box">
                            <h3>Interviews Expected</h3>
                            <div class="value" id="result-interviews">0</div>
                        </div>
                        <div class="result-box">
                            <h3>Offers Expected</h3>
                            <div class="value" id="result-offers">0</div>
                        </div>
                        <div class="result-box">
                            <h3>Deals Expected</h3>
                            <div class="value" id="result-deals">0</div>
                        </div>
                    </div>
                    
                    <button class="btn" onclick="clearAll()">🔄 Clear All Fields</button>
                </div>
            </div>
            
            <div class="section">
                <div class="section-header">
                    <span>📈</span>
                    <h2>Your Earnings</h2>
                    <span class="toggle">▼</span>
                </div>
                <div class="section-content">
                    <div class="earnings-section" id="revenue-display" style="display: none;">
                        <h3>Total Revenue:</h3>
                        <div class="total" id="total-revenue">£0</div>
                    </div>
                    
                    <div style="padding: 16px; text-align: center; color: #6c757d; font-size: 0.9rem;" id="no-revenue-message">
                        Enter metrics above to see revenue calculation
                    </div>
                </div>
            </div>
        </div>
        
        <div class="section" style="margin-bottom: 20px;">
            <div class="section-header">
                <span>💷</span>
                <h2>Revenue Planning</h2>
                <span class="toggle">▼</span>
            </div>
            <div class="section-content">
                <p style="color: #6c757d; margin-bottom: 16px; font-size: 0.9rem;">
                    Enter your annual revenue target to see breakdown by period
                </p>
                
                <div class="input-row">
                    <div class="input-group">
                        <label for="revenue">Annual Revenue Target (£)</label>
                        <input type="number" id="revenue" placeholder="e.g. 500000" min="0">
                    </div>
                    <div class="input-group">
                        <label for="period-select">View By</label>
                        <select id="period-select">
                            <option value="quarterly">Quarterly</option>
                            <option value="monthly">Monthly</option>
                            <option value="yearly">Yearly</option>
                        </select>
                    </div>
                </div>
                
                <button class="btn" onclick="clearRevenue()">🔄 Clear Revenue Target</button>
            </div>
        </div>
        
        <div class="breakdown-section" id="breakdown-display">
            <div class="section-header">
                <span>📅</span>
                <h2 id="breakdown-title">Quarterly Breakdown</h2>
                <span class="toggle">▼</span>
            </div>
            <div class="breakdown-grid" id="breakdown-grid">
            </div>
        </div>
        
        <div class="info-footer">
            <h4>ℹ️ Conversion Ratios</h4>
            <p>CVs → Interviews: 32.0% • Interviews → Offers: 23.8% • Offers → Deals: 50.0% • Avg Deal: £22,000</p>
        </div>
    </div>

    <script>
        const RATIOS = {
            cvsToInterviews: 849 / 2652,      // 32.0%
            interviewsToOffers: 202 / 849,    // 23.8%
            offersToDeals: 101 / 202,         // 50.0%
            averageDealSize: 22000
        };

        function formatNumber(num) {
            if (num < 1 && num > 0) {
                return num.toFixed(1);
            } else if (num >= 1 && num < 10) {
                return num.toFixed(1);
            }
            return Math.round(num).toLocaleString();
        }

        function formatDealsForRevenue(num) {
            return Math.floor(num);
        }

        function formatCurrency(num) {
            return new Intl.NumberFormat('en-GB', {
                style: 'currency',
                currency: 'GBP',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(num);
        }

        function calculate() {
            const cvs = parseInt(document.getElementById('cvs').value) || 0;
            const interviews = parseInt(document.getElementById('interviews').value) || 0;
            const offers = parseInt(document.getElementById('offers').value) || 0;
            const deals = parseInt(document.getElementById('deals').value) || 0;
            const revenue = parseInt(document.getElementById('revenue').value) || 0;

            let resultCvs = 0;
            let resultInterviews = 0;
            let resultOffers = 0;
            let resultDeals = 0;
            let showRevenue = false;

            // Calculate based on which input has a value
            if (revenue > 0) {
                resultDeals = revenue / RATIOS.averageDealSize;
                resultOffers = resultDeals / RATIOS.offersToDeals;
                resultInterviews = resultOffers / RATIOS.interviewsToOffers;
                resultCvs = resultInterviews / RATIOS.cvsToInterviews;
            } else if (deals > 0) {
                resultDeals = deals;
                resultOffers = deals / RATIOS.offersToDeals;
                resultInterviews = resultOffers / RATIOS.interviewsToOffers;
                resultCvs = resultInterviews / RATIOS.cvsToInterviews;
                showRevenue = true;
            } else if (offers > 0) {
                resultOffers = offers;
                resultDeals = offers * RATIOS.offersToDeals;
                resultInterviews = offers / RATIOS.interviewsToOffers;
                resultCvs = resultInterviews / RATIOS.cvsToInterviews;
                showRevenue = true;
            } else if (interviews > 0) {
                resultInterviews = interviews;
                resultOffers = interviews * RATIOS.interviewsToOffers;
                resultDeals = resultOffers * RATIOS.offersToDeals;
                resultCvs = interviews / RATIOS.cvsToInterviews;
                showRevenue = true;
            } else if (cvs > 0) {
                resultCvs = cvs;
                resultInterviews = cvs * RATIOS.cvsToInterviews;
                resultOffers = resultInterviews * RATIOS.interviewsToOffers;
                resultDeals = resultOffers * RATIOS.offersToDeals;
                showRevenue = true;
            }

            const totalRevenue = resultDeals * RATIOS.averageDealSize;

            // Update display
            document.getElementById('result-cvs').textContent = formatNumber(resultCvs);
            document.getElementById('result-interviews').textContent = formatNumber(resultInterviews);
            document.getElementById('result-offers').textContent = formatNumber(resultOffers);
            document.getElementById('result-deals').textContent = formatNumber(resultDeals);

            // Show/hide revenue card
            const revenueCard = document.getElementById('revenue-display');
            const noRevenueMessage = document.getElementById('no-revenue-message');
            if (showRevenue && resultDeals >= 0.5) {
                revenueCard.style.display = 'block';
                noRevenueMessage.style.display = 'none';
                document.getElementById('total-revenue').textContent = formatCurrency(totalRevenue);
            } else {
                revenueCard.style.display = 'none';
                noRevenueMessage.style.display = 'block';
            }

            // Show breakdown only for revenue target input
            const breakdownSection = document.getElementById('breakdown-display');
            if (revenue > 0) {
                breakdownSection.style.display = 'block';
                updateBreakdown(resultCvs, resultInterviews, resultOffers, resultDeals, revenue);
            } else {
                breakdownSection.style.display = 'none';
            }
        }

        function updateBreakdown(totalCvs, totalInterviews, totalOffers, totalDeals, originalRevenue) {
            const periodType = document.getElementById('period-select').value;
            const breakdownTitle = document.getElementById('breakdown-title');
            const breakdownGrid = document.getElementById('breakdown-grid');
            
            let periods = [];
            let divisor = 1;
            
            if (periodType === 'quarterly') {
                periods = [{name: 'Q1', id: 'q1'}, {name: 'Q2', id: 'q2'}, {name: 'Q3', id: 'q3'}, {name: 'Q4', id: 'q4'}];
                divisor = 4;
                breakdownTitle.textContent = 'Quarterly Breakdown';
            } else if (periodType === 'monthly') {
                periods = [
                    {name: 'Jan', id: 'm1'}, {name: 'Feb', id: 'm2'}, {name: 'Mar', id: 'm3'},
                    {name: 'Apr', id: 'm4'}, {name: 'May', id: 'm5'}, {name: 'Jun', id: 'm6'},
                    {name: 'Jul', id: 'm7'}, {name: 'Aug', id: 'm8'}, {name: 'Sep', id: 'm9'},
                    {name: 'Oct', id: 'm10'}, {name: 'Nov', id: 'm11'}, {name: 'Dec', id: 'm12'}
                ];
                divisor = 12;
                breakdownTitle.textContent = 'Monthly Breakdown';
            } else if (periodType === 'yearly') {
                periods = [{name: 'Annual', id: 'y1'}];
                divisor = 1;
                breakdownTitle.textContent = 'Annual Breakdown';
            }
            
            // Clear and rebuild the grid
            breakdownGrid.innerHTML = '';
            
            periods.forEach(period => {
                const periodCvs = totalCvs / divisor;
                const periodInterviews = totalInterviews / divisor;
                const periodOffers = totalOffers / divisor;
                const periodDeals = totalDeals / divisor;
                const periodRevenue = originalRevenue / divisor;
                
                const showPeriodRevenue = periodDeals >= 0.1;
                
                const revenueSection = showPeriodRevenue ? `
                    <div class="period-revenue">
                        <div class="label">Target Revenue</div>
                        <div class="amount">${formatCurrency(periodRevenue)}</div>
                    </div>
                ` : '';
                
                const periodCard = document.createElement('div');
                periodCard.className = 'period-card';
                periodCard.innerHTML = `
                    <h4>${period.name}</h4>
                    ${revenueSection}
                    <div class="period-metrics">
                        <div class="metric-item">
                            <div class="value">${formatNumber(periodCvs)}</div>
                            <div class="label">CVs</div>
                        </div>
                        <div class="metric-item">
                            <div class="value">${formatNumber(periodInterviews)}</div>
                            <div class="label">Interviews</div>
                        </div>
                        <div class="metric-item">
                            <div class="value">${formatNumber(periodOffers)}</div>
                            <div class="label">Offers</div>
                        </div>
                        <div class="metric-item">
                            <div class="value">${formatNumber(periodDeals)}</div>
                            <div class="label">Deals</div>
                        </div>
                    </div>
                `;
                
                breakdownGrid.appendChild(periodCard);
            });
        }

        function clearAll() {
            document.getElementById('cvs').value = '';
            document.getElementById('interviews').value = '';
            document.getElementById('offers').value = '';
            document.getElementById('deals').value = '';
            calculate();
        }

        function clearRevenue() {
            document.getElementById('revenue').value = '';
            calculate();
        }

        function clearOthers(currentId) {
            const inputs = ['cvs', 'interviews', 'offers', 'deals'];
            inputs.forEach(id => {
                if (id !== currentId) {
                    document.getElementById(id).value = '';
                }
            });
        }

        function clearRevenueInput() {
            document.getElementById('revenue').value = '';
        }

        // Add event listeners
        document.getElementById('cvs').addEventListener('input', function() {
            if (this.value) {
                clearOthers('cvs');
                clearRevenueInput();
            }
            calculate();
        });
        document.getElementById('interviews').addEventListener('input', function() {
            if (this.value) {
                clearOthers('interviews');
                clearRevenueInput();
            }
            calculate();
        });
        document.getElementById('offers').addEventListener('input', function() {
            if (this.value) {
                clearOthers('offers');
                clearRevenueInput();
            }
            calculate();
        });
        document.getElementById('deals').addEventListener('input', function() {
            if (this.value) {
                clearOthers('deals');
                clearRevenueInput();
            }
            calculate();
        });
        document.getElementById('revenue').addEventListener('input', function() {
            if (this.value) {
                document.getElementById('cvs').value = '';
                document.getElementById('interviews').value = '';
                document.getElementById('offers').value = '';
                document.getElementById('deals').value = '';
            }
            calculate();
        });
        
        document.getElementById('period-select').addEventListener('change', function() {
            calculate();
        });

        // Initialize
        calculate();
    </script>
</body>
</html>
